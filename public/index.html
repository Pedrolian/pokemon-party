<!doctype html>  
<html lang="en">  
<head>

  <link href="/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/pokedex/bundled.css" rel="stylesheet">

  <link href="/css/party/sprite.css" rel="stylesheet">

  <style type="text/css">
    body{
      background-color: #eee;
      padding-top: 60px;
    }
    .row {
      margin: 0px;
    }
    .panel {
      margin: 20px;
      padding-bottom: 10px;
    }
  </style>

</head>
<body>
  
  <!-- Navigation -->
  <nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#">Pokémon Party</a>
      </div>
      <div id="navbar" class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
          <li class="active"><a href="#">Home</a></li>
          <li><a href="#about">Github</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <form class="form-horizontal" method="post">
    <div class="panel panel-primary">
      <div class="panel-heading">
        <h3 class="panel-title">Create Pokémon Party</h3>
      </div>
      <div class="panel-body">
        <div class="form-group">
          <label class="control-label col-sm-2" for="email">Select Generation:</label>
          <div class="col-sm-10">
            <select name="generation" class="form-control">
              <option value="1">Generation I - Red & Blue</option>
              <option value="2">Generation II - Gold & Silver</option>
              <option value="3">Generation III - Ruby & Sapphire</option>
              <option value="4">Generation IV - Diamond & Pearl</option>
              <option value="5">Generation V - Black & White</option>
              <option value="6" selected>Generation VI - X & Y</option>
            </select>
          </div>
        </div>
      </div>
    </div>

    <div class="container text-center">
      <button type="submit" class="btn btn-lg btn-primary">+ Add Party</button>
    </div>
  </form>

  <div class="parties"></div>

  <script src="/jquery/dist/jquery.min.js"></script>
  <script src="/bootstrap/dist/js/bootstrap.min.js"></script>
  <script src="/socket.io/socket.io.js"></script>

  <script src="/js/sprite.js"></script>

  <script>  
    var socket = io.connect(':4200');

    socket.on('connect', () =>
    {
      socket.emit('page-index');
    });

    socket.on('parties', (data) =>
    {
      for(var key in data)
      {
        var party = data[key];
        $('.parties').append(`
          <div class="party row" id="party-${party.ID}">
            <div class="panel panel-primary">
              <div class="panel-heading row">
                <div class="panel-title col-xs-8 text-left">Party: ${party.ID}</div>
                <div class="col-xs-4 text-right">
                  <a href="/party/${party.ID}" class="btn btn-xs btn-default"><span class="glyphicon glyphicon-new-window"></span>  </a>
                </div>
              </div>
              <div class="panel-body">
              </div>
            </div>
          </div>
          <div class="clearfix"></div>
        `);
        for(var i = 1; i <= 6; i++)
        {
          if(party.party[i-1].pokemon)
            $(`#party-${party.ID} .panel-body`).append(`
              <div class="col-xs-2" id="slot-${i}">
                ${SpriteDiv(party.generation, party.party[i-1].type, party.party[i-1].pokemon.id, party.party[i-1].name)}
              </div>
            `);
        }
      }

    });
  </script>


</body>
</html> 