<!doctype html>  
<html lang="en">  
<head>
  <link href="/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">

  <link href="/css/pokedex.css" rel="stylesheet">

  <style type="text/css">
    body, html{
      background-color: #eee;
      width: 100vw;
      height: 100vh;
      margin: 0px;
      padding: 0px;
    }
    div#sprite {
      position: relative;
    }
    div#name {
      position: absolute;
      bottom: 5px;
      right: 0;
      left: 0;
      background: rgba(46, 170, 220, 0.6);
      color: white;
      opacity: 0.9;
    }
  </style>

</head>
<body>

  <!-- Party -->
  <div class="party">
  </div>

  <script src="/jquery/dist/jquery.min.js"></script>
  <script src="/bootstrap/dist/js/bootstrap.min.js"></script>
  <script src="/socket.io/socket.io.js"></script>

  <script>  
    var socket = io.connect(':4200');
    var partyID = window.location.pathname.split('/')[2];

    socket.on('connect', () =>
    {
      socket.emit('party', partyID);
    });

    socket.on('party', (data) => {
      Seed();
      for(var key in data.party)
      {
        if(data.party[key].pokemon)
        {
          $(`.party #slot-${Number(key)+1} #name`).html(data.party[key].name);
          $(`.party #slot-${Number(key)+1} #sprite`).addClass(`pokedex-gen-${data.generation}-${data.party[key].type} pokemon-${data.party[key].pokemon.id}`);
        }
      }

    });
  </script>  

  <script type="text/javascript">
    // Seed party div
    function Seed()
    {
      $('.party').html("");
      for(var i = 1; i <= 6; i++)
      {
        $('.party').append(`
          <div class="col-xs-6 col-sm-4" id="slot-${i}">
            <div id="sprite" class="text-center center-block">
              <div id="name" class="text-center"></div>
            </div>
          </div>
      `);
        if(i % 2 == 0)
          $('.party').append(`<div class="clearfix visible-xs"></div>`);
        if(i % 3 == 0)
          $('.party').append(`<div class="clearfix hidden-xs"></div>`);
      }
    }
  </script>

</body>
</html> 