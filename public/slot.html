<!doctype html>  
<html lang="en">  
<head>
  <link href="/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">

  <link href="/css/party/sprite.css" rel="stylesheet">

  <style type="text/css">
    body, html{
      background-color: #eee;
      width: 100vw;
      height: 100vh;
      margin: 0px;
      padding: 0px;
    }
  </style>

</head>
<body>

  <!-- Party -->
  <div class="party">
    <div id="slot-1"></div>
  </div>

  <script src="/jquery/dist/jquery.min.js"></script>
  <script src="/bootstrap/dist/js/bootstrap.min.js"></script>
  <script src="/socket.io/socket.io.js"></script>

  <script>  
    var socket = io.connect(':4200');

    var Generation = {};
    var partyID = window.location.pathname.split('/')[2];
    var slotID = Number(window.location.pathname.split('/')[3]) - 1;

    socket.on('connect', () =>
    {
      socket.emit('party', partyID);
    });

    socket.on('generation', (data) => 
    {
      Generation = data;
      $('head').append(`<link rel="stylesheet" type="text/css" href="/css/pokedex/generation-${data.id}/normal.css">`);
      if(data.hasShiny)
        $('head').append(`<link rel="stylesheet" type="text/css" href="/css/pokedex/generation-${data.id}/shiny.css">`);
    });
    
    socket.on('party', (data) => {
      var tmp = data.party[slotID];
      $(`.party #slot-1`).html("");
      if(tmp.pokemon)
        $(`.party #slot-1`).html( SpriteDiv(data.generation, tmp.type, tmp.pokemon.id, tmp.name) );
    });
  </script>  

  <script type="text/javascript">
    function SpriteDiv(generation, type, pokemon, name)
    {
      return `<div id="pokemon-sprite" class="text-center center-block pokedex-gen-${generation}-${type} pokemon-${pokemon}"><div id="pokemon-name" class="text-center">${name}</div></div>`
    }
  </script>

</body>
</html> 