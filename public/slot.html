<!doctype html>  
<html lang="en">  
<head>
  <link href="/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">

  <link href="/css/pokedex.css" rel="stylesheet">

  <style type="text/css">
    body, html{
      background-color: #eee;
      width: 100vw;
      height: 100vh;
      margin: 0px;
      padding: 0px;
    }
    div#sprite {
      position: relative;
    }
    div#name {
      position: absolute;
      bottom: 5px;
      right: 0;
      left: 0;
      background: rgba(46, 170, 220, 0.6);
      color: white;
      opacity: 0.9;
    }
  </style>

</head>
<body>

  <!-- Party -->
  <div class="party">
    <div id="slot-1">
      <div id="sprite" class="">
        <div id="name" class="text-center"></div>
      </div>
    </div>
  </div>

  <script src="/jquery/dist/jquery.min.js"></script>
  <script src="/bootstrap/dist/js/bootstrap.min.js"></script>
  <script src="/socket.io/socket.io.js"></script>

  <script>  
    var socket = io.connect(':4200');
    var partyID = window.location.pathname.split('/')[2];
    var slotID = Number(window.location.pathname.split('/')[3]) - 1;

    socket.on('connect', () =>
    {
      socket.emit('party', partyID);
    });

    socket.on('party', (data) => {
      var tmp = data.party[slotID];
      if(tmp.pokemon)
      {
        $(`.party #slot-1 #name`).html(tmp.name);
        $(`.party #slot-1 #sprite`).addClass(`pokedex-gen-${data.generation}-${tmp.type} pokemon-${tmp.pokemon.id}`);
      }
    });
  </script>  

</body>
</html> 